---
import GlobalStyles from "@/components/GlobalStyles.astro";
import ApiDataLayout from "@/layouts/ApiDataLayout.astro";
import Layout from "@/layouts/Landing.astro";
import { endpoints } from "@/modules/getEndpoints";

export function getStaticPaths() {
  return endpoints.map((e) => {
    return {
      params: {
        chapterName: e.chapterName,
        mistakeId: e.mistakeId,
        exampleId: e.exampleId,
      },
    };
  });
}

const prefix = "api";
const { chapterName, mistakeId, exampleId } = Astro.params;
const url = `${prefix}/${chapterName}/${mistakeId}/${exampleId}`;
console.log(url);
---

<GlobalStyles />
<Layout>
  <ApiDataLayout
    apiPath={url}
    title=`Fetch API`
    description=`Question fetched from API endpoint ${url}`
  />
</Layout>
